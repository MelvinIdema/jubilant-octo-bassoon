const examplePoem={paragraph:"Op het groene veld vol passie, waar de voetbalhelden strijden. Schijnbeweging, tact en actie, het publiek kan zich verblijden. Op het groene veld vol passie, waar de voetbalhelden strijden. Schijnbeweging, tact en actie, het publiek kan zich verblijden.",keywords:[{keyword:"voetbalhelden",alternatives:["stervoetballers","voetbalkampioenen","topspelers","voetbaltalenten"]},{keyword:"tact",alternatives:["strategie","slimheid","inzicht","techniek"]},{keyword:"actie",alternatives:["beweging","dynamiek","snelheid","energie"]}]},init=()=>{const e=document.querySelector(".poem");if(!e)return;const t=examplePoem.paragraph.split(". ").map(e=>{if("."!==e.charAt(e.length-1)){return e+"."}return e}),a=examplePoem.keywords.map(e=>e.keyword),n=t.map(e=>createParagraphWithKeywords(e,a,examplePoem.keywords));n.forEach(t=>{e.appendChild(t)}),e.style.paddingTop=`calc(50vh - ${n[0].offsetHeight/2}px)`,e.style.paddingBottom=`calc(50vh - ${n[n.length-1].offsetHeight/2}px)`,startPoem(t)},createParagraphWithKeywords=(e,t,a)=>{const n=document.createElement("p");let r=0;n.classList.add("blur"),t.forEach(t=>{const o=e.indexOf(t,r);if(-1!==o){const i=e.substring(r,o);i.length>0&&n.appendChild(document.createTextNode(i));const l=document.createElement("span");l.appendChild(document.createTextNode(t)),l.dataset.alternatives=a.find(e=>e.keyword===t).alternatives.join(","),n.appendChild(l),l.addEventListener("click",handleClick),r=o+t.length}});const o=e.substring(r);return o.length>0&&n.appendChild(document.createTextNode(o)),n},startPoem=e=>{const t=document.querySelector(".poem-wrapper"),a=document.querySelector(".poem"),n=document.querySelector(".share"),r=a.childNodes;let o=0,i=0;r.forEach((a,l)=>{l>0&&(i+=75*e[l-1].length),setTimeout(()=>{a.classList.remove("blur"),l<=0||(o+=r[l-1].offsetHeight+32,t.scrollTop=o,l===r.length-1&&setTimeout(()=>{n.classList.add("show")},1e3))},i)})},handleClick=e=>{const t=e.target.dataset.alternatives.split(",");showSpinner(t)};init();